<mat-card *ngIf="cobro$ | async as cobro">
  <div layout class="pad-left pad-top">
    <button mat-icon-button>
      <mat-icon [routerLink]="['/clientes', cobro.cliente.id]">person</mat-icon>
    </button>
    <span class="pad-left pad-right mat-title"> {{cobro.nombre}}</span>
  </div>
  <mat-divider></mat-divider>
  <div class="pad-top pad-left pad-right">
    <sx-cobro-form [cobro]="cobro"></sx-cobro-form>
  </div>
  <mat-divider></mat-divider>
  <sx-aplicaciones-table [aplicaciones]="cobro.aplicaciones"></sx-aplicaciones-table>
  <mat-divider></mat-divider>
  <mat-card-actions>
    <button type="button" mat-button [routerLink]="['../']">
      <mat-icon>arrow_back</mat-icon> Cobros
    </button>

    <sx-cxc-selector [disabled]="cobro.disponible <= 0" [cliente]="cobro.cliente" [cartera]="cobro.tipo" [maximoPermitido]="cobro.disponible"
      (select)="aplicar(cobro, $event)" title="Agregar facturas"></sx-cxc-selector>

    <ng-container *ngIf="cobro.disponible <= 0 && !cobro.cfdi ">
      <button mat-button (click)="generarRecibo(cobro)"> Generar recibo (CFDI)</button>
    </ng-container>

    <ng-container *ngIf="cobro?.cfdi">
      <button mat-button><mat-icon>print</mat-icon> Recibo: {{cobro.cfdi.folio}}</button>
      <sx-cfdi-xml [cfdi]="cobro.cfdi"></sx-cfdi-xml>
      <button mat-button type="button">
        <mat-icon>email</mat-icon> Email
      </button>
    </ng-container>
  </mat-card-actions>
</mat-card>
